# μΈμ¦ / λ³΄μ• κΈ°μ΄ (Authentication / Security)

<br>

## HTTPS

HTTPSλ” Hyper Text Transfer Protocol Secure Soket Layerμ μ•½μλ΅,  
HTTP over SSL(TLS) λλ” HTTP over Secureλ΅ λ¶€λ¥΄κΈ°λ„ ν•λ‹¤.

<br>

**π’΅ HTTPSμ νΉμ§•**

- κΈ°λ°€μ„± (Privacy) : λ°μ΄ν„°λ¥Ό κ°€λ΅μ± μ μ—†μ (μ΅°ν λ¶κ°€λ¥)

- λ¬΄κ²°μ„± (Integrity) : λ°μ΄ν„°κ°€ μ΅°μ‘λμ§€ μ•μ (μμ • λ¶κ°€λ¥)

<br>

HTTPSλ” SecureλΌλ” λ‹¨μ–΄μ—μ„λ„ λ³Ό μ μλ“―μ΄ μ•”νΈν™”λ¥Ό μ„ν•΄ μ‚¬μ©ν•λ©°,  
μΈμ¦μ„, CA, λΉ„λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

<br>

### π”Έ μ•”νΈν™”

μ•”νΈν™”λ” μΌλ ¨μ μ •λ³΄λ¥Ό μ„μμ λ°©μ‹μ„ μ‚¬μ©ν•μ—¬ λ‹¤λ¥Έ ν•νƒλ΅ λ³€ν™μ‹μΌμ„,  

ν•΄λ‹Ή μ •λ³΄λ¥Ό μ†μ μ μ™Έμ—λ” μ΄ν•΄ν•  μ μ—†λ„λ΅ μ•κ³ λ¦¬μ¦μ„ ν†µν•΄ μ •λ³΄λ¥Ό κ΄€λ¦¬ν•λ” κ³Όμ •μ„ λ§ν•λ‹¤.

<br>

ν”„λ΅ν† μ½μ—μ„ μ”μ²­μ΄λ‚ μ‘λ‹µμ΄ μ•”νΈν™”λμ§€ μ•κ³  μ „μ†΅λλ‹¤λ©΄, λΉ„λ°€λ²νΈμ™€ κ°™μ€ μ¤‘μ”ν• λ°μ΄ν„°κ°€ μ μ¶λ  κ°€λ¥μ„±μ΄ μλ‹¤.

μ΄λ¥Ό μ„ν•΄ HTTPSμ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μ„ λ•λ” λ€μΉ­ν‚¤λ¥Ό μ‚¬μ©ν•κ³ , λ€μΉ­ν‚¤λ¥Ό μ£Όκ³ λ°›λ” κ³Όμ •μ—μ„ λΉ„λ€μΉ­ν‚¤ λ°©μ‹μΌλ΅ μ£Όκ³  λ°›λ”λ‹¤.

> **π’΅ λ€μΉ­ν‚¤ & λΉ„λ€μΉ­ν‚¤**
>
> λ€μΉ­ν‚¤ λ°©μ‹μ€ μ–‘μ½μ΄ **κ³µν†µμ λΉ„λ°€ν‚¤**λ¥Ό κ³µμ ν•μ—¬ λ°μ΄ν„°λ¥Ό μ•”νΈν™” λ° λ³µνΈν™”ν•λ” λ°©μ‹μ΄λ‹¤.
>
> λΉ„λ€μΉ­ν‚¤ λ°©μ‹μ€ κ°κ° **κ³µκ°ν‚¤(public key)μ™€ λΉ„λ°€ν‚¤(private key)** λ¥Ό κ°€μ§€κ³ ,  
> κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν• μ •λ³΄λ¥Ό κ°μΈμ΄ κ°€μ§„ λΉ„λ°€ν‚¤λ΅ λ³µνΈν™”ν•λ” λ°©μ‹ **(μ•”νΈν™”)**
> 
> λΉ„λ°€ν‚¤λ΅ μ•”νΈν™”ν• μ •λ³΄λ¥Ό κ³µκ°ν‚¤λ¥Ό ν†µν•΄ λ³µνΈν™”ν•λ” λ°©μ‹ **(μΈμ¦μ„ - μ „μμ„λ…)** μ΄ μλ‹¤.

<br>

### π”Έ μΈμ¦μ„ (Certificate)

λ°μ΄ν„°λ¥Ό μ κ³µν• μ„λ²„κ°€ μ •λ§λ΅ λ°μ΄ν„°λ¥Ό λ³΄λ‚Έ μ„λ²„μΈμ§€ μ‹ μ›μ„ μΈμ¦, ν™•μΈν•λ” μ©λ„λ¥Ό λ§ν•λ©°,

HTTPSλ” λΈλΌμ°μ €μ—μ„ μ„λ²„μ μ‘λ‹µκ³Ό ν•¨κ» μ „λ‹¬λ μΈμ¦μ„λ¥Ό ν™•μΈν•  μ μλ‹¤.

> μΈμ¦μ„λ” λΉ„λ°€ν‚¤λ΅ μ•”νΈν™”ν•κ³ , κ³µκ°ν‚¤λ¥Ό ν†µν•΄ λ³µνΈν™”ν•λ” λ°©μ‹μ„ κ°€μ§€κ³  μλ‹¤.

<br>

### π”Έ CA (Cretificate Authority)

CAλ” μΈμ¦μ„λ¥Ό λ°κΈ‰ν•΄μ£Όλ” μ—„κ²©ν•κ² κ³µμΈλ κΈ°κ΄€μ„ λ§ν•λ©°,

μ„λ²„μ κ³µκ°ν‚¤μ™€ μ •λ³΄λ¥Ό CAμ λΉ„λ°€ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•λ‹¤.

<br>

**π’΅ HTTPSμ ν†µμ‹  μ‹μ‘μ„ μ„ν• κ³Όμ •**

**Hand Shake**

1. μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² CAμ—μ„ λ°κΈ‰λ°›μ€ μΈμ¦μ„λ¥Ό λ³΄λ‚Έλ‹¤.

2. ν΄λΌμ΄μ–ΈνΈκ°€ λ‚΄μ¥λ CA λ¦¬μ¤νΈλ¥Ό ν†µν•΄ μΈμ¦μ„λ¥Ό ν™•μΈν•λ‹¤.  
   β†’ ν•΄λ‹Ή κ³Όμ •μ—μ„ μ‹¤ν¨ μ‹ κ²½κ³  μ°½μ΄ μ¶λ ¥λλ‹¤.

3. CAμ κ³µκ°ν‚¤λ¥Ό ν†µν•΄ μΈμ¦μ„λ¥Ό λ³µνΈν™”ν•λ‹¤.

**λΉ„λ°€ ν‚¤ μƒμ„±**

4. ν΄λΌμ΄μ–ΈνΈμ—μ„ λ€μΉ­ν‚¤λ¥Ό λ§λ“¤μ–΄ μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•κ³  μ„λ²„μ— μ „λ‹¬ν•λ‹¤.

5. μ„λ²„λ” κ°μΈν‚¤λ¥Ό ν†µν•΄ λ³µνΈν™”ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ λ€μΉ­ν‚¤λ¥Ό ν™•μΈν•λ‹¤.

**μƒνΈ ν‚¤ κ²€μ¦**

6. μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈμ λ€μΉ­ν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬ν•λ‹¤.

7. ν΄λΌμ΄μ–ΈνΈλ” λ€μΉ­ν‚¤λ΅ λ°μ΄ν„°λ¥Ό λ³µνΈν™”ν•΄μ„ μ„λ΅μ λ€μΉ­ν‚¤κ°€ λ§λ”μ§€ ν™•μΈν•λ‹¤.

8. HTTPS μ—°κ²° μ„±λ¦½

<br>

μ„μ™€ κ°™μ΄ CAλ¥Ό ν†µν•΄ μ„λ²„ μΈμ¦ λ° λ°μ΄ν„° μ•”νΈν™” κ³Όμ •μ„ μ•„μ°λ¥Έ ν”„λ΅ν† μ½μ„ **SSL** λλ” **TSL**μ΄λΌκ³  ν•λ‹¤.

<br>

***

<br>

## Hashing

ν•΄μ‹±μ€ μ›λ³Έ λ¬Έμμ—΄μ„ μ•μ•„λ³Ό μ μ—†λ” λ‚ν•΄ν• λ¬Έμμ—΄λ΅ ν‘ν„ν•λ” κ³Όμ •μ„ λ»ν•λ©°, μ•”νΈν™”μ— λ§μ΄ μ‚¬μ©λλ‹¤.

Input β†’ Outputμ΄ ν•­μƒ λ™μΌν• μμ ν•¨μμ΄λ©°, ν•΄μ‹±λ κ°’(Digest)μ€ μ‚¬μ‹¤μƒ λ³µνΈν™”κ°€ λ¶κ°€λ¥ν•λ‹¤.

<br>

ν•΄μ‹±μ—λ” 3κ°€μ§€ μ² μΉ™μ΄ μ΅΄μ¬ν•λ‹¤.

1. λ¨λ“  κ°’μ— λ€ν•΄ ν•΄μ‹ κ°’μ„ κ³„μ‚°ν•λ”λ° μ¤λ κ±Έλ¦¬μ§€ μ•μ•„μ•Ό ν•λ‹¤. (μ•”νΈν™”κ°€ λΉ¨λΌμ•Όν•λ‹¤.)

2. μ•„μ£Ό μ‘μ€ λ‹¨μ„μ λ³€κ²½μ΄λΌλ„ μ™„μ „ν λ‹¤λ¥Έ ν•΄μ‹ κ°’μ„ κ°€μ Έμ•Ό ν•λ‹¤.

3. μµλ€ν• λ‹¤λ¥Έ ν•΄μ‹ κ°’μ„ ν”Όν•΄μ•Όν•λ©°, λ¨λ“  κ°’μ€ κ³ μ ν• ν•΄μ‹ κ°’μ„ κ°€μ Έμ•Όν•λ‹¤.
   - κ·Ήν λ‚®μ€ ν™•λ¥ λ΅ μ „ν€ λ‹¤λ¥Έ λ¬Έμμ—΄μΈλ° λ‘κ°™μ€ ν•΄μ‹ κ°’μ„ κ°€μ§€λ” κ²½μ°κ°€ μ΅΄μ¬

<br>

### π”Έ ν•΄μ‹± μ•κ³ λ¦¬μ¦

λ€ν‘μ μΈ ν•΄μ‹± μ•κ³ λ¦¬μ¦μ€ SHA-1, SHA256, SHA512 λ“±μ΄ μμΌλ©°,  

SHA1μ€ ν„μ¬ μ‚¬μ©ν•μ§€ μ•κ³ , SHA256μ„ μ£Όλ΅ μ‚¬μ©ν•λ‹¤.

<br>

### π”Έ Salt

μ•”νΈν™”ν•΄μ•Ό ν•λ” κ°’μ— 'λ³„λ„μ κ°’'μ„ μ¶”κ°€ν•μ—¬ κ²°κ³Όλ¥Ό λ³€ν•μ‹ν‚¤λ” κ²ƒμ„ λ§ν•λ‹¤.

<br>

νΉμ • μ•κ³ λ¦¬μ¦μ„ ν†µν• ν•΄μ‹λ” ν•­μƒ κ°™μ€ κ²°κ³Όλ¥Ό λ¦¬ν„΄ν•κΈ° λ•λ¬Έμ—,  

μ›λ³Έ κ°’κ³Ό ν•΄μ‹ κ°’μ„ λ€μ΅°ν• ν…μ΄λΈ”(λ μΈλ³΄μ° ν…μ΄λΈ”)μ„ λ§λ“¤μ–΄ Decodingν•λ” κ²½μ°κ°€ λ°μƒν•  μ μλ‹¤.

<br>

λ”°λΌμ„ μ›λ³Έ κ°’μ— μ„μμ λ¬Έμμ—΄μ„ μ¶”κ°€ν•μ—¬ ν•΄μ‹λ¥Ό μ§„ν–‰ν•λ©΄,  

μ•κ³ λ¦¬μ¦μ΄ λ…Έμ¶λλ”λΌλ„ μ›λ³Έ κ°’μ„ λ³΄νΈν•  μ μλ„λ΅ μ•μ „ μ¥μΉ μ—­ν• μ„ ν•΄λ†“μ„ μ μλ‹¤.

<br>

**π’΅ Salt μ‚¬μ© μ‹ μ£Όμ μ‚¬ν•­**

1. Saltλ” μ μ €μ™€ ν¨μ¤μ›λ“ λ³„λ΅ μ μΌν• κ°’μ„ κ°€μ Έμ•Όν•λ‹¤.

2. μ‚¬μ©μ κ²μ •μ„ μƒμ„±ν•  λ•μ™€ λΉ„λ°€λ²νΈλ¥Ό λ³€κ²½ν•  λ•λ§λ‹¤ μƒλ΅μ΄ Saltλ¥Ό μ‚¬μ©ν•΄ ν•΄μ‹±ν•΄μ•Όν•λ‹¤.

3. Saltλ” μ¬μ‚¬μ©λμ–΄μ„λ” μ•λλ‹¤.

4. Saltλ” DBμ μ μ € ν…μ΄λΈ”μ— ν•¨κ» μ €μ¥λμ–΄μ•Ό ν•λ‹¤.

<br>

***

<br>

## Cookie

μΏ ν‚¤λ” μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈμ— λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ” λ°©λ²• μ¤‘ ν•λ‚μ΄λ©°,  

μ£Όλ΅ λ‘ μ”μ²­μ΄ λ™μΌν• λΈλΌμ°μ €μ—μ„ λ“¤μ–΄μ™”λ”μ§€ μ•„λ‹μ§€λ¥Ό νλ‹¨ν•  λ• μ‚¬μ©ν•λ‹¤.

<br>

μΏ ν‚¤μ λ©μ μ€ HTTPμ statelessλΌλ” νΉμ§•μ„ λ³΄μ™„ν•κΈ° μ„ν•¨μ— μλ‹¤.  

> HTTP ν”„λ΅ν† μ½μ—μ„ μƒνƒ μ •λ³΄λ¥Ό κΈ°μ–µμ‹μΌ λ΅κ·ΈμΈ μƒνƒλ¥Ό μ μ§€ν•  μ μμ

<br>

### π”Έ Cookieμ—μ„ μ‚¬μ©λλ” μµμ…

μ„λ²„λ” μΏ ν‚¤λ¥Ό μ΄μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ €μ¥ν•κ³ , λ°μ΄ν„°λ¥Ό λ‹¤μ‹ λ¶λ¬μ™€ μ‚¬μ©ν•  μ μλ‹¤.

ν•μ§€λ§ λ°μ΄ν„°λ“¤μ€ μ•„λ¬΄λ•λ‚ λ¶λ¬μ¬ μ μλ” κ²ƒμ΄ μ•„λ‹ νΉμ • μ΅°κ±΄λ“¤μ΄ λ§μ΅±ν•λ” κ²½μ°μ—λ§ λ¶λ¬μ¬ μ μλ‹¤.

**1. Domain**

λ„λ©”μΈμ€ ```google.com```κ³Ό κ°™μ΄ μ„λ²„μ— μ ‘μ†ν•  μ μλ” μ΄λ¦„μ„ λ»ν•λ©°,  
μΏ ν‚¤ μµμ…μ— λ„λ©”μΈ μ •λ³΄κ°€ μ΅΄μ¬ν•λ‹¤λ©΄ λ„λ©”μΈ μµμ…κ³Ό μ„λ²„ λ„λ©”μΈμ΄ μΌμΉν•΄μ•Όλ§ μΏ ν‚¤λ¥Ό μ „μ†΅ν•λ‹¤.

μΏ ν‚¤ μµμ…μ—μ„ λ„λ©”μΈμ€ ν¬νΈ(```:8080```), μ„λΈ λ„λ©”μΈ μ •λ³΄(```www.```), μ„Έλ¶€ κ²½λ΅λ¥Ό ν¬ν•¨ν•μ§€ μ•λ”λ‹¤.

<br>

**2. Path**

Path μµμ…μ€ μ„Έλ¶€ κ²½λ΅λ¥Ό κ΄€λ¦¬ν•λ©°, μ„Έλ¶€ κ²½λ΅λ” μ„λ²„κ°€ λΌμ°ν…(κ²½λ΅ μ„¤μ •)ν•  λ• μ‚¬μ©ν•λ” κ²½λ΅λ¥Ό λ§ν•λ‹¤.

Path μµμ…μ€ μ„¤μ •λ pathλ¥Ό μ „λ¶€ λ§μ΅±ν•λ” κ²½μ°,  
μ”μ²­ν•λ” Pathκ°€ μ¶”κ°€λ΅ λ” μ΅΄μ¬ν•λ”λΌλ„ μΏ ν‚¤λ¥Ό μ„λ²„μ— μ „μ†΅ν•  μ μλ‹¤.

μλ¥Ό λ“¤μ–΄ Pathκ°€ ```/cafe```λ΅ μ„¤μ •λ κ²½μ°,  
μ„Έλ¶€ κ²½λ΅κ°€ ```/cafe/coffee```μ™€ κ°™μ΄ μ‘μ„±λλ©΄ Path μµμ…μ„ λ§μ΅±ν•λ―€λ΅ μΏ ν‚¤λ¥Ό μ „μ†΅ν•λ‹¤.

<br>

**3. MaxAge & Expires**

MaxAgeλ” μ•μΌλ΅ λ‡ μ΄λ™μ• μΏ ν‚¤κ°€ μ ν¨ν•μ§€ μ„¤μ •ν•λ” μµμ…μ΄κ³ ,  

Expiresλ” μ•μΌλ΅ μ–Έμ κΉμ§€ μ ν¨ν•μ§€ Dateλ¥Ό μ§€μ •ν•λ” μµμ…μ΄λ‹¤.

> 2κ°€μ§€ μ†μ„±μ΄ λ¨λ‘ μ΅΄μ¬ν•  κ²½μ°μ—λ” MaxAge μ†μ„±μ΄ μ°μ„Έν•λ‹¤.

<br>

ν΄λΌμ΄μ–ΈνΈ μ‹κ°„μ„ κΈ°μ¤€μΌλ΅ μ‹κ°„μ„ μ§€μ •ν•λ©°, μ‹κ°„μ„ μ΄κ³Όν•κ² λλ©΄ μΏ ν‚¤λ” μλ™μΌλ΅ μ†λ©Έλλ‹¤.

> **π’΅ μ„Έμ… μΏ ν‚¤ (Session Cookie) & μμ†μ„± μΏ ν‚¤ (Persistent Cookie)**
>
> μ„Έμ… μΏ ν‚¤ : MaxAge, Expire μµμ…μ΄ μ—†λ” μΏ ν‚¤λ΅, λΈλΌμ°μ €κ°€ μ‹¤ν–‰ μ¤‘μΌ λ• μ‚¬μ©ν•λ” μ„μ‹ μΏ ν‚¤
> β†’ λΈλΌμ°μ €λ¥Ό μΆ…λ£ν•κ² λλ©΄ ν•΄λ‹Ή μΏ ν‚¤λ” μ‚­μ λλ‹¤.
>
> μμ†μ„± μΏ ν‚¤ : λΈλΌμ°μ €μ μΆ…λ£ μ—¬λ¶€μ— μƒκ΄€ μ—†μ΄ μµμ…μ— μ§€μ •λ μ ν¨ μ‹κ°„λ§νΌ μ‚¬μ© κ°€λ¥ν• μΏ ν‚¤

<br>

**4. Secure**

Secure μµμ…μ€ μΏ ν‚¤λ¥Ό μ „μ†΅ν•  λ• μ‚¬μ©ν•λ” ν”„λ΅ν† μ½μ— λ”°λΌ μΏ ν‚¤ μ „μ†΅ μ—¬λ¶€λ¥Ό κ²°μ •ν•λ‹¤.
 
```true```λ΅ μ„¤μ •λλ©΄, 'HTTPS' ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•μ—¬ ν†µμ‹ ν•λ” κ²½μ°μ—λ§ μΏ ν‚¤λ¥Ό μ „μ†΅ν•  μ μλ‹¤.

Defaultλ” ```false```μ΄λ‹¤.

<br>

**5. HttpOnly**

μλ°”μ¤ν¬λ¦½νΈμ—μ„ λΈλΌμ°μ €μ μΏ ν‚¤μ— μ ‘κ·Ό κ°€λ¥ μ—¬λ¶€λ¥Ό κ²°μ •ν•λ‹¤.

```true```λ΅ μ„¤μ •λλ©΄, μλ°”μ¤ν¬λ¦½νΈμ—μ„λ” μΏ ν‚¤μ— μ ‘κ·Όμ΄ λ¶κ°€λ¥ν•κ² λλ‹¤.

```false```λ΅ μ„¤μ •λλ©΄, μλ°”μ¤ν¬λ¦½νΈμ—μ„ μΏ ν‚¤μ— μ ‘κ·Όμ΄ κ°€λ¥ν•λ©° XSS κ³µκ²©μ— μ·¨μ•½ν•΄μ§„λ‹¤.

Defaultλ” ```false```μ΄λ‹¤.

<br>

**6. SameSite**

SameSiteμ—μ„ μ¶”κ°€λ΅ μ‚¬μ© κ°€λ¥ν• μµμ…μ€ μ•„λμ™€ κ°™λ‹¤.

- Strict : ```same-site```μΈ κ²½μ°μ— μΏ ν‚¤λ¥Ό μ „μ†΅ν•  μ μλ‹¤.

- Lax : cross-site μ”μ²­λΌλ„ safeν• μ”μ²­μ— λ€ν•΄μ„λ” μΏ ν‚¤λ¥Ό μ „μ†΅ν•  μ μλ‹¤.  
  - ```GET``` λ©”μ„λ“ λ°©μ‹  
  - ```<ahref="">```  
  - ```<link rel="prerender">```  

<br>

- None : ν•­μƒ μΏ ν‚¤λ¥Ό λ³΄λ‚΄μ¤„ μ μλ‹¤. ν•μ§€λ§ μΏ ν‚¤ μµμ… μ¤‘ ```Secure``` μµμ…μ΄ ν•„μ”ν•λ‹¤.

<br>

> **π’΅ origin & site**
> 
> origin : μ¤ν‚΄, μ„λΈλ„λ©”μΈ, λ„λ©”μΈ, ν¬νΈλ΅ κµ¬μ„±λμ–΄ μλ‹¤.   
> (```https://www.google.com:433```)
>
> site : λ„λ©”μΈλ§μ„ ν¬ν•¨ν•λ” URL   
> (```google.com```)

<br><br>

μ„μ™€ κ°™μ€ μµμ…λ“¤μ„ μ§€μ •ν• ν›„ **μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ**λ΅ μ²μ μΏ ν‚¤λ¥Ό μ „μ†΅ν•λ‹¤λ©΄   
ν—¤λ”μ— ```Set-Cookie```λΌλ” ν”„λ΅νΌν‹°μ— μΏ ν‚¤λ¥Ό λ‹΄μ•„ μ „μ†΅ν•κ² λλ‹¤.

μ΄ν›„ **ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„**λ΅ μΏ ν‚¤λ¥Ό μ „μ†΅ν•  λ•, ```Cookie```λΌλ” ν”„λ΅νΌν‹°μ— μΏ ν‚¤λ¥Ό λ‹΄μ•„ μ „μ†΅ν•κ² λλ‹¤.

<br>

μΏ ν‚¤λ” μ„λ²„μ λ¶€λ‹΄μ„ λμ–΄μ¤„ μ μλ‹¤λ” μ¥μ μ΄ μμ§€λ§,  

μΏ ν‚¤ μμ²΄λ” μΈμ¦μ΄λ‚ λ³΄μ•μ μλ‹¨μ΄ μ•„λ‹ ν•λ‚μ λ„κµ¬λΌκ³  λ³Ό μ μλ‹¤.

<br>

π¨ λν• μΏ ν‚¤λ” μ¤λμ‹κ°„ μ μ§€λ  μ μκ³ , μλ°”μ¤ν¬λ¦½νΈλ¥Ό ν†µν•΄ μΏ ν‚¤μ— μ ‘κ·Όν•  μ μκΈ° λ•λ¬Έμ— 

&emsp; **μΏ ν‚¤μ— λ―Όκ°ν• μ •λ³΄λ¥Ό λ‹΄λ” κ²ƒμ€ μ„ν—ν•λ‹¤.**

<br>

***

<br>

## Session

μ„Έμ…μ€ μ„λ²„κ°€ ν•΄λ‹Ή μ„λ²„λ΅ μ ‘κ·Όν•λ” ν΄λΌμ΄μ–ΈνΈ(μ‚¬μ©μ)λ¥Ό μ‹λ³„ν•λ” λ°©λ²•μ΄λ‹¤.

μ£Όλ΅ SSR(Server Side Rendering) λ°©μ‹μ—μ„ μ‚¬μ©ν•λ” μΈμ¦ λ°©μ‹μ΄λ©°, μ•„λμ™€ κ°™μ€ νΉμ§•μ΄ μλ‹¤.

- μ ‘μ† μƒνƒλ¥Ό μ„λ²„κ°€ κ°€μ§(stateful)

- μ ‘μ† μƒνƒμ™€ κ¶ν• λ¶€μ—¬λ¥Ό μ„ν•΄ μ„Έμ… μ•„μ΄λ””λ¥Ό μΏ ν‚¤λ΅ μ „μ†΅

<br>

### π”Έ μ„Έμ… κΈ°λ° μΈμ¦ (Session-based Authentication)

<br>

<img src = "https://velog.velcdn.com/images%2Fjun7867%2Fpost%2Fcc01ef5e-b17f-45f9-ad28-cd5abb637f43%2Fimage.png" width = "500">

<br>

1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ μ ‘μ†μ„ μ‹λ„ν•λ‹¤.

   - ν•΄λ‹Ή μ μ €κ°€ μΈμ¦μ— μ„±κ³µν–λ‹¤λ©΄, μΈμ¦μ— λ”°λΌ λ¦¬μ†μ¤μ μ ‘κ·Ό κ¶ν•μ΄ λ‹¬λΌμ Έμ•Ό ν•λ‹¤.

<br>

2. μ„λ²„λ” μ ‘κ·Όν• ν΄λΌμ΄μ–ΈνΈμ Cookieλ¥Ό ν™•μΈν•΄ Session IDκ°€ μ΅΄μ¬ν•λ”μ§€ ν™•μΈν•λ‹¤.

   -  Session IDκ°€ μ—†λ‹¤λ©΄ μƒμ„±ν•΄ Cookieμ— λ‹΄μ•„μ„ μ‘λ‹µν•λ‹¤.

<br>

3. μ„λ²„λ΅λ¶€ν„° λ°ν–‰λ Session IDλ” ν•΄λ‹Ή μ„λ²„μ™€ ν΄μ•„μ΄μ–ΈνΈ λ©”λ¨λ¦¬μ— μ €μ¥λλ‹¤.

   - μ΄λ• μ‚¬μ©λλ” Cookie νƒ€μ…μ€ μ„Έμ… μΆ…λ£ μ‹ κ°™μ΄ μ†λ©Έλλ” Memory Cookieμ΄λ‹¤.

<br>

4. ν΄λΌμ΄μ–ΈνΈ μ ‘μ† μΆ…λ£ μ‹, μ„λ²„μ— μ €μ¥λ Session IDλ” μ†λ©Έλλ‹¤.

   - μ„λ²„λ” μ„Έμ… μ •λ³΄λ¥Ό μ‚­μ ν•κ³ , ν΄λΌμ΄μ–ΈνΈμ—μ„λ” μΏ ν‚¤λ¥Ό κ°±μ‹ ν•΄μ•Όν•λ‹¤.

   - μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈμ— μΏ ν‚¤λ¥Ό μ „μ†΅ν•  λ• Session IDμ ν‚¤ κ°’μ„ λ¬΄ν¨ν• κ°’μΌλ΅ κ°±μ‹ 

<br>

> μ„λ²„λ” μ‚¬μ©μκ°€ μΈμ¦μ— μ„±κ³µν–μμ„ μ•κ³  μμ–΄μ•Ό ν•λ‹¤.  
> ν΄λΌμ΄μ–ΈνΈλ” μΈμ¦ μ„±κ³µμ„ μ¦λ…ν•  μλ‹¨μ„ κ°–κ³  μμ–΄μ•Ό ν•λ‹¤.
>
> μ‚¬μ©μκ°€ μΈμ¦μ— μ„±κ³µν• μƒνƒλ¥Ό **μ„Έμ…**μ΄λΌκ³  ν•λ‹¤.  
> 
> μ„Έμ…μ€ μ£Όλ΅ In-memory λλ” μ„Έμ… μ¤ν† μ–΄ (redisμ™€ κ°™μ΄ νΈλμ­μ…μ΄ λΉ λ¥Έ DB)μ— μ €μ¥λλ‹¤.


<br>

***

<br>

## μ›Ή λ³΄μ• κ³µκ²©

<br>

### π”Έ SQL Injection

ν΄λΌμ΄μ–ΈνΈμ μ…λ ¥κ°’μ„ μ΅°μ‘ν•μ—¬ μ„λ²„μ λ°μ΄ν„°λ² μ΄μ¤λ¥Ό κ³µκ²©ν•  μ μλ” κ³µκ²©λ°©μ‹

<br>

```sql
SELECT * 
FROM users
WHERE auth='admin'
AND id='input';
```

μ‚¬μ©μκ°€ Inputμ„ ν†µν•΄ μ…λ ¥ν•λ” κ°’μ€ μ„μ™€ κ°™μ€ μΏΌλ¦¬λ¬Έμ„ ν†µν•΄ λ°μ΄ν„°λ² μ΄μ¤μ— μ ‘κ·Όν•λ‹¤.

<br>

λ§μ•½ μ—¬κΈ°μ„ ```' OR '1' = '1```μ„ μ…λ ¥ν•΄μ„ λ³΄λ‚Έλ‹¤λ©΄

```sql
SELECT * 
FROM users
WHERE auth='admin'
AND id='' OR '1'='1';
```

μ„μ™€ κ°™μ€ μΏΌλ¦¬λ¬Έμ΄ μ‘μ„±λ  κ²ƒμ΄κ³ , ν•΄λ‹Ή κ°’μ€ ```TRUE```κ°€ λμ–΄ λ΅κ·ΈμΈμ— μ„±κ³µν•  κ²ƒμ΄λ‹¤.

<br>

### **π’΅ λ€μ‘ λ°©μ•**

<br>

**1. μ…λ ¥κ°’ κ²€μ¦**

μ •κ· ν‘ν„μ‹κ³Ό κ°™μ€ λ°©μ‹μ„ ν†µν•΄ ν•΄λ‹Ή μ…λ ¥κ°’μ„ κ²€μ¦ν•  μ μλ‹¤.

<br>

**2. Prepared Statement κµ¬λ¬Έ μ‚¬μ©**

Prepared Statement κµ¬λ¬Έμ„ μ‚¬μ©ν•λ©΄ μ‚¬μ©μ μ…λ ¥μ΄ SQLλ¬ΈμΌλ΅λ¶€ν„° λ¶„λ¦¬λμ–΄ κ³µκ²©μ„ λ°©μ–΄ν•  μ μλ‹¤.

μ…λ ¥κ°’ μ „λ‹¬ μ΄μ „μ— DBκ°€ λ―Έλ¦¬ μ»΄νμΌν•μ—¬ SQLμ„ μ‹¤ν–‰μ‹ν‚¤μ§€ μ•κ³  λ€κΈ°ν•λ©°,  

μ…λ ¥ κ°’μ„ SQLλ¬Έμ΄ μ•„λ‹ λ‹¨μ ν…μ¤νΈλ΅ μΈμ‹ν•κ² λλ‹¤.

<br>

**3. Error Message λ…Έμ¶ κΈμ§€**

DBμ μ—λ¬ λ©”μ„Έμ§€λ¥Ό ν†µν•΄ ν…μ΄λΈ”μ΄λ‚ μΉΌλΌ λ“±μ μ •λ³΄λ¥Ό μ–»μ„ μ μμΌλ―€λ΅,  

μ—λ¬ λ©”μ„Έμ§€λ¥Ό λ…Έμ¶ν•μ§€ μ•λ„λ΅ λ³„λ„μ μ—λ¬ ν•Έλ“¤λ§μ΄ ν•„μ”ν•λ‹¤.

<br>

**4. ORMμ„ μ‚¬μ©**

JPAμ™€ κ°™μ€ Prameter Value Binding λ°©μ‹μ€ SQL μΏΌλ¦¬λ¬Έμ— μ§μ ‘ μ ‘κ·Όν•μ§€ μ•μΌλ―€λ΅,

SQL Injection κ³µκ²©μ„ λ°©μ–΄ν•  μ μλ‹¤.  

λ‹¤λ§, ```@Query``` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•κ±°λ‚, JDBCμ™€ mybatisμ ```${}``` λ¬Έλ²•μ€ μΈμ μ… κ³µκ²©μ„ λ‹Ήν•  μ μλ‹¤.

<br>

### π”Έ CSRF (Cross-Site Request Forgery, μ‚¬μ΄νΈ κ°„ μ”μ²­ μ„μ΅°)

cross-siteμ—μ„ μ μ €κ°€ λ³΄λ‚΄λ” μ”μ²­(Request)μ„ μ΅°μ‘(Forgery)ν•λ” κ³µκ²©μ„ λ§ν•λ‹¤.

ν•΄λ‹Ή κ³µκ²©μ€ ν•΄μ»¤κ°€ μ§μ ‘ λ°μ΄ν„°μ— μ§μ ‘ μ ‘κ·Όν•  μ μ—†λ‹¤.

<br>

**π’΅ CSRF κ³µκ²©μ„ μ„ν• μ΅°κ±΄**

- μΏ ν‚¤λ¥Ό μ‚¬μ©ν• λ΅κ·ΈμΈ : μ μ €κ°€ λ΅κ·ΈμΈ ν–μ„ λ•, μΏ ν‚¤λ¥Ό ν†µν•΄ μ–΄λ–¤ μ μ €μΈμ§€ μ• μ μμ–΄μ•Όν•¨

- μμΈ΅ν•  μ μλ” μ”μ²­ /parameterλ¥Ό κ°€μ§€κ³  μμ–΄μ•Ό ν•¨ :  requestμ— ν•΄μ»¤κ°€ λ¨λ¥Ό μ μλ” μ •λ³΄κ°€ λ‹΄κ²¨μμΌλ©΄ μ•λ¨

<br>

### **π’΅ λ€μ‘ λ°©μ•**

<br>

**1. CSRF ν† ν° μ‚¬μ©**

μ„λ²„ μΈ΅μ—μ„ CSRF κ³µκ²©μ— λ³΄νΈν•κΈ° μ„ν• λ¬Έμμ—΄μ„ μ μ €μ λΈλΌμ°μ €μ™€ μ›Ή μ•±μ—λ§ μ κ³µ

<br>

**2. Same-site Cookie μ‚¬μ©**

κ°™μ€ λ„λ©”μΈμ—μ„λ§ μ„Έμ… / μΏ ν‚¤λ¥Ό μ‚¬μ©ν•  μ μλ„λ΅ ν•λ‹¤.

<br>

### π”Έ XSS (Cross-Site Scripting, μ‚¬μ΄νΈ κ°„ μ¤ν¬λ¦½ν…)

κ³µκ²©ν•λ ¤λ” μ‚¬μ΄νΈμ— μ¤ν¬λ¦½νΈλ¥Ό λ„£λ” κΈ°λ²•μ„ λ§ν•λ‹¤. 

κ³µκ²©μ— μ„±κ³µν•λ©΄ μ‚¬μ΄νΈμ— μ ‘μ†ν• μ‚¬μ©μλ” μ‚½μ…λ μ½”λ“λ¥Ό μ‹¤ν–‰ν•κ² λλ©°,  
λ³΄ν†µ μλ„μΉ μ•μ€ ν–‰λ™μ„ μν–‰μ‹ν‚¤κ±°λ‚ μΏ ν‚¤λ‚ μ„Έμ… ν† ν° λ“±μ λ―Όκ°ν• μ •λ³΄λ¥Ό νƒμ·¨ν•λ‹¤.

<br>

### **π’΅ λ€μ‘ λ°©μ•**

XSS κ³µκ²©μ€ λ―Έλ¦¬ λ°©μ§€ν•κΈ° μ–΄λ ¤μ°λ©°,  
νΉν μ•…μ„± ν”„λ΅κ·Έλ¨μ€ μ‚¬μ©μμ κ°μΈ μ¥μΉκ°€ μ•„λ‹ μ‚¬μ©μκ°€ λ°©λ¬Έν•λ” μ›Ήμ‚¬μ΄νΈλ¥Ό λ€μƒμΌλ΅ ν•κΈ°μ— κ³µκ²©μ— λ…Έμ¶λκΈ° μ‰½λ‹¤.

λ‹¤λ§, Chrome, Safari λ“± λ€λ¶€λ¶„μ λ³΄μ• λΈλΌμ°μ €μ—λ” λ°μ‚¬ν• XSSλ¥Ό νƒμ§€ν•κ³  μ°¨λ‹¨ν•λ” λ° λ„μ›€μ΄ λλ” λ³΄μ• κΈ°λ¥μ΄ λ‚΄μ¥λμ–΄ μλ‹¤.

<br>

**1. Script λ¬Έμ ν•„ν„°λ§**

XSS κ³µκ²©μ€ μ…λ ¥κ°’μ— λ€ν• κ²€μ¦μ΄ μ λ€λ΅ μ΄λ£¨μ–΄μ§€μ§€ μ•μ•„ λ°μƒν•λ” μ·¨μ•½μ μ΄λ‹¤.

λ”°λΌμ„ μ‚¬μ©μμ λ¨λ“  μ…λ ¥ κ°’μ— λ€ν•μ—¬ μ„λ²„ μΈ΅μ—μ„ ν•„ν„°λ§μ„ ν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.

<br>

**2. XSS κ³µκ²©μ— λ€ν• μ΄ν•΄**

URLμ„ κ³„μ† ν™•μΈν•λ” μµκ΄€μ΄λ‚, μ „λ¬Έ κΈ°μ  μ§€μ‹μ„ λ³΄μ ν•κ³  μλ‹¤λ©΄ λ°©λ¬Έν•λ” λ¨λ“  μ›Ήνμ΄μ§€μ μ½”λ“λ¥Ό μ΅°μ‚¬ν•κ³  μ•…μ„± μ¤ν¬λ¦½νΈκ°€ μλ”μ§€ ν™•μΈν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

<br><br>

***

_2022.11.23. Modified_

_2022.11.18. Update_