# AOP (Aspect-Oriented Programming)

κ΄€μ  μ§€ν–¥ ν”„λ΅κ·Έλλ°(AOP)μ€ κ΄€μ (Aspect)μ— λ”°λΌ ν•µμ‹¬ κΈ°λ¥κ³Ό λ¶€κ°€ κΈ°λ¥μ„ λ¶„λ¦¬ν•λ‹¤.

AOPλ” κΈ°μ΅΄μ— μ‚¬μ©ν•λ **OOPλ¥Ό λ€μ²΄ν•κΈ° μ„ν• κ²ƒμ΄ μ•„λ‹** ν΅λ‹¨ κ΄€μ‹¬μ‚¬λ¥Ό κΉ”λ”ν•κ² μ²λ¦¬ν•κΈ° μ„ν•΄   
**OOPμ λ¶€μ΅±ν• λ¶€λ¶„μ„ λ³΄μ΅°ν•λ” λ©μ μΌλ΅ κ°λ°**λμ—λ‹¤.

> κ΄€μ  (Aspect)  
>
> λ¶€κ°€ κΈ°λ¥μ„ μ •μν• μ½”λ“μΈ Adviceμ™€ Adviceλ¥Ό μ–΄λ””μ— μ μ©ν• μ§€ κ²°μ •ν•λ” PointCutμ„ ν•©μΉ κ°λ…  
>
> λ¶„λ¦¬ν• λ¶€κ°€ κΈ°λ¥κ³Ό κ·Έ κΈ°λ¥λ“¤μ„ μ–΄λ””μ— μ μ©ν• μ§€ μ„ νƒν•λ” κΈ°λ¥μ„ ν•©ν•΄μ„ ν•λ‚μ λ¨λ“λ΅ λ§λ“  κ²ƒ

<br>

### κΈ°μ΅΄ κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°

- OOPμ ν•µμ‹¬μ€ κ³µν†µλ λ©μ μ„ λ λ°μ΄ν„°μ™€ λ™μ‘μ„ λ¬¶μ–΄ ν•λ‚μ κ°μ²΄λ΅ μ •μν•λ” κ²ƒμ΄λ‹¤.

- κ°μ²΄λ¥Ό μ κ·Ήμ μΌλ΅ ν™μ©ν•¨μΌλ΅μ¨, κΈ°λ¥μ„ μ¬μ‚¬μ© ν•  μ μλ” κ²ƒμ΄ μ¥μ μ΄λ‹¤.

- κ°μ²΄λ¥Ό μ ν™μ©ν•κΈ° μ„ν•΄μ„  κ΄€μ‹¬μ‚¬ λ¶„λ¦¬(Separation of Concerns, SoC)μ λ””μμΈ μ›μΉ™μ„ μ¤€μν•΄μ•Όν•λ‹¤.

> **κ΄€μ‹¬μ‚¬ λ¶„λ¦¬λ” λ¨λ“ν™”μ ν•µμ‹¬μ΄λ‹¤.**  
> Springμ—μ„λ” ```@Controller```, ```@Service```, ```@Repository```μ²λΌ κ΄€μ‹¬μ‚¬ λ³„λ΅ κ³„μΈµμ„ λ‚λ  κ°μ²΄λ¥Ό κ΄€λ¦¬ν•λ‹¤.

<br>

### κΈ°μ΅΄ κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ λ¬Έμ μ 

νΉμ • κ΄€μ‹¬μ‚¬ μ—…λ¬΄ κ΄€λ ¨ μ½”λ“μ— νΈλμ­μ…, λ³΄μ•, λ΅κΉ… λ“±μ μ½”λ“κ°€ μ΅΄μ¬ν•λ‹¤.  
μ¦‰, **λΉ„μ¦λ‹μ¤ ν΄λμ¤μ— ν΅λ‹¨ κ΄€μ‹¬μ‚¬μ™€ ν•µμ‹¬ κ΄€λ¦¬μ‚¬κ°€ κ³µμ΅΄ν•κ² λλ‹¤**λ” λ»μ΄λ‹¤.

- μ΄λ΅ μΈν•΄, λ©”μ„λ“μ λ³µμ΅λ„κ°€ μ¦κ°€ν•μ—¬ λΉ„μ¦λ‹μ¤ μ½”λ“ νμ•…μ΄ μ–΄λ µκ² λλ‹¤.

- λ¶€κ°€ κΈ°λ¥μ λ¶νΉμ • λ‹¤μ λ©”μ„λ“κ°€ λ°λ³µμ μΌλ΅ κµ¬ν„λμ–΄ ν΅λ‹¨ κ΄€μ‹¬μ‚¬μ λ¨λ“ν™”κ°€ μ–΄λ µλ‹¤.

<br>

### AOPμ λ“±μ¥

κΈ°μ΅΄ OOPκ°€ ν΄λμ¤λ¥Ό λ‹¨μ„λ΅ λ¨λ“ν™”λ¥Ό ν–λ‹¤λ©΄, AOPλ” κ΄€μ μ„ κΈ°μ¤€μΌλ΅ λ¨λ“ν™”λ¥Ό ν•λ‹¤.

AOPμ—μ„λ” μ–΄ν”λ¦¬μΌ€μ΄μ… λ΅μ§μ„ λΉ„μ¦λ‹μ¤ λ΅μ§κ³Ό κ°™μ€ **ν•µμ‹¬ κΈ°λ¥**κ³Ό  
νΈλμ­μ…, λ³΄μ•, λ΅κΉ… λ“±μ ν•µμ‹¬ κΈ°λ¥μ„ λ³΄μ΅°ν•κΈ° μ„ν• **λ¶€κ°€ κΈ°λ¥**μΌλ΅ λ‚λλ‹¤.

> μ†ν”„νΈμ›¨μ–΄ κ°λ°μ—μ„ λ³€κ²½ μ§€μ μ€ **ν•λ‚**κ°€ λ  μ μλ„λ΅ μ λ¨λ“ν™” λμ–΄μ•Ό ν•λ‹¤.  
> 
> AOPλ” OOP λ°©μ‹μ λ¶ν•„μ”ν• λ°λ³µμ„ ν•΄κ²°ν•κΈ° μ„ν•΄ λ“±μ¥ν–λ‹¤.

<br>

***

<br>

## AOPμ μ©μ–΄

### π”Έ Aspect

μ—¬λ¬ κ°μ²΄μ— κ³µν†µμΌλ΅ μ μ©λλ” κ³µν†µ κΈ°λ¥μ„ λ»ν•λ‹¤.

Advice + PointCutμ„ λ¨λ“ν™”ν•μ—¬ μ–΄ν”λ¦¬μΌ€μ΄μ…μ— ν¬ν•¨λλ” ν΅λ‹¨ κΈ°λ¥μ΄λ‹¤.

<br>

### π”Έ Join Point

ν΄λμ¤ μ΄κΈ°ν™”, κ°μ²΄ μΈμ¤ν„΄μ¤ν™”, λ©”μ„λ“ νΈμ¶, ν•„λ“ μ ‘κ·Ό, μμ™Έ λ°μƒκ³Ό κ°™μ€ **μ–΄ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ νλ¦„μ—μ„μ νΉμ • ν¬μΈνΈ**λ¥Ό λ»ν•λ‹¤.

- μ¶”μƒμ μΈ κ°λ…μΌλ΅, AOPλ¥Ό μ μ©ν•  μ μλ” λ¨λ“  μ§€μ μ„ λ§ν•λ‹¤.

μ–΄ν”λ¦¬μΌ€μ΄μ…μ— μƒλ΅μ΄ λ™μ‘μ„ μ¶”κ°€ν•κΈ° μ„ν•΄ μ΅°μΈ ν¬μΈνΈμ— κ΄€μ‹¬ μ½”λ“(Aspect Code)λ¥Ό μ¶”κ°€ν•  μ μλ‹¤.

> Spring AOPλ” ν”„λ΅μ‹ λ°©μ‹μ„ μ‚¬μ©ν•λ―€λ΅, μ΅°μΈ ν¬μΈνΈλ” ν•­μƒ **λ©”μ„λ“ μ‹¤ν–‰ μ§€μ μΌλ΅ μ ν•**λλ‹¤.

<br>

### π”Έ Advice

Join Pointμ—μ„ μν–‰λλ” μ½”λ“λ¥Ό λ»ν•λ©°, Aspectλ¥Ό **μ–Έμ ** ν•µμ‹¬ μ½”λ“μ— μ μ©ν•  μ§€λ¥Ό μ •μν•λ‹¤.

μ‹μ¤ν… μ „μ²΄ Aspectμ— API νΈμ¶μ„ μ κ³µν•λ‹¤.

<br>

### π”Έ PointCut

Join Point μ¤‘μ—μ„ Adviceκ°€ μ μ©λ  **μ„μΉ**λ¥Ό μ„ λ³„ν•λ” κΈ°λ¥μ΄λ‹¤.

AspectJ ν‘ν„μ‹μ„ μ‚¬μ©ν•΄μ„ μ§€μ •ν•λ‹¤.

> Spring AOPλ” ν”„λ΅μ‹ λ°©μ‹μ„ μ‚¬μ©ν•λ―€λ΅, λ©”μ„λ“ μ‹¤ν–‰ μ§€μ λ§ ν¬μΈνΈμ»·μΌλ΅ μ„ λ³„ κ°€λ¥ν•λ‹¤.

<br>

### π”Έ Weaving

PointCutμΌλ΅ κ²°μ •ν• Targetμ Join Pointμ— Adviceλ¥Ό μ μ©ν•λ” κ²ƒμ„ λ»ν•λ‹¤.  
μ‰½κ² λ§ν•΄, Adviceλ¥Ό ν•µμ‹¬ μ½”λ“μ— μ μ©ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤.

Weavingμ„ ν†µν•΄ ν•µμ‹¬ κΈ°λ¥ μ½”λ“μ— μν–¥μ„ μ£Όμ§€ μ•κ³  λ¶€κ°€ κΈ°λ¥μ„ μ¶”κ°€ν•  μ μλ‹¤.

<br>

### π”Έ AOP Proxy

AOP κΈ°λ¥μ„ κµ¬ν„ν•κΈ° μ„ν•΄ λ§λ“  ν”„λ΅μ‹ κ°μ²΄μ΄λ‹¤.

ν”„λ΅μ‹λ” μ–΄λ–¤ κ°μ²΄λ¥Ό μ‚¬μ©ν•κ³ μ ν•  λ•, ν•΄λ‹Ή κ°μ²΄μ— μ§μ ‘ μ”μ²­ν•λ” κ²ƒμ΄ μ•„λ‹ μ¤‘κ°„μ— ν”„λ΅μ‹ κ°μ²΄λ¥Ό λ‘μ–΄ ν”„λ΅μ‹ κ°μ²΄κ°€ λ€μ‹ ν•΄μ„ μ”μ²­μ„ λ°›μ•„ μ‹¤μ  κ°μ²΄λ¥Ό νΈμ¶ν•΄ μ£Όλ„λ΅ ν•λ‹¤.

ν”„λ΅μ‹ κ°μ²΄ λ‚΄λ¶€μ—λ” μ‹¤μ  Beanμ„ μ”μ²­ν•λ” λ΅μ§μ΄ λ“¤μ–΄μμ–΄, ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄ κ·Έ λ• μ‹¤μ  Beanμ„ νΈμ¶ν•λ‹¤.

Springμ—μ„ AOP Proxyλ” JDK λ™μ  ν”„λ΅μ‹ λλ” CGLIB ν”„λ΅μ‹μ΄λ‹¤.

<br>

### π”Έ Target

λ¶€κ°€ κΈ°λ¥μ„ λ¶€μ—¬ν•  λ€μƒμ„ λ§ν•λ‹¤.

Adviceλ¥Ό λ°›λ” κ°μ²΄μ΄λ©° PointCutμΌλ΅ κ²°μ •λλ‹¤.

<br>

### π”Έ Adviser

ν•λ‚μ Adviceμ™€ ν•λ‚μ PointCutμΌλ΅ κµ¬μ„±λλ‹¤.

- Spring AOPμ—μ„λ§ μ‚¬μ©λλ” νΉλ³„ν• μ©μ–΄μ΄λ‹¤.

<br>

***

<br>

## νƒ€μ…λ³„ Advice

> **π’΅ Advice**
>
> Join Pointμ—μ„ μν–‰λλ” μ½”λ“λ¥Ό λ»ν•λ©°, Aspectμ κ³µν†µ κΈ°λ¥μ„ **μ–Έμ ** ν•µμ‹¬ μ½”λ“μ— μ μ©ν•  μ§€λ¥Ό μ •μν•λ‹¤.

<br>

Adviceλ” κΈ°λ³Έμ μΌλ΅ μμ„λ¥Ό λ³΄μ¥ν•μ§€ μ•λ”λ‹¤.

μμ„λ¥Ό μ§€μ •ν•κΈ° μ„ν•΄μ„λ” ```@Aspect``` μ μ© λ‹¨μ„λ΅ org.```springframework.core.annotation.@Order``` μ–΄λ…Έν…μ΄μ…μ„ μ μ©ν•΄μ•Όν•λ‹¤.
- Advice λ‹¨μ„κ°€ μ•„λ‹ ν΄λμ¤ λ‹¨μ„λ΅ μ μ© κ°€λ¥ν•λ‹¤.
- ν•λ‚μ Aspectμ— μ—¬λ¬ Adviceκ°€ μ΅΄μ¬ν•λ©΄ μμ„λ¥Ό λ³΄μ¥λ°›μ„ μ μ—†λ‹¤.
- Aspectλ¥Ό λ³„λ„μ ν΄λμ¤λ΅ λ¶„λ¦¬ν•΄μ•„ ν•λ‹¤.

<br>

### Adviceμ μΆ…λ¥

**π”Έ Before**

Join Point **μ‹¤ν–‰ μ΄μ „**μ— μ‹¤ν–‰ν•λ„λ΅ ν•λ‹¤.

Before Adviceλ¥Ό κµ¬ν„ν• λ©”μ„λ“λ” μΌλ°μ μΌλ΅ **λ¦¬ν„΄ νƒ€μ…μ΄ void**μ΄μ§€λ§,  
λ¦¬ν„΄ κ°’μ„ κ°–λ”λΌλ„ μ‹¤μ  Advice μ μ© κ³Όμ •μ—λ” μν–¥μ„ μ£Όμ§€ μ•λ”λ‹¤.

λ©”μ„λ“μ—μ„ μμ™Έλ¥Ό λ°μƒμ‹ν‚¬ κ²½μ° λ€μƒ κ°μ²΄μ λ©”μ„λ“κ°€ νΈμ¶λμ§€ μ•λ”λ‹¤λ” μ£Όμ μ‚¬ν•­μ΄ μλ‹¤.

```java
@Before("hello.aop.order.aop.Pointcuts.orderAndService()")
public void doBefore(JoinPoint joinPoint) {
    log.info("[before] {}", joinPoint.getSignature());
}
```

- μ‘μ—… νλ¦„μ„ λ³€κ²½ν•  μ μ—†μΌλ©°, λ©”μ„λ“ μΆ…λ£ μ‹ μλ™μΌλ΅ λ‹¤μ νƒ€κ²μ΄ νΈμ¶λλ‹¤.

<br>

**π”Έ After returning**

Join Pointκ°€ **μ •μƒμ μΌλ΅ μ™„λ£λ ν›„** μ‹¤ν–‰ν•λ„λ΅ ν•λ‹¤.

```java
@AfterReturning(value = "hello.aop.order.aop.Pointcuts.orderAndService()", returning = "result")
public void doReturn(JoinPoint joinPoint, Object result) {
    log.info("[return] {} return={}", joinPoint.getSignature(), result);
}
```

- returning μ†μ„±μ— μ‚¬μ©λ μ΄λ¦„μ€ Advice λ©”μ„λ“μ λ§¤κ°λ³€μ μ΄λ¦„κ³Ό λ™μΌν•΄μ•Όν•λ‹¤.
- returning μ μ— μ§€μ •λ νƒ€μ…μ κ°’μ„ λ°ν™ν•λ” λ©”μ„λ“λ§ λ€μƒμ„ μ‹¤ν–‰ν•λ‹¤.

<br>

**π”Έ After throwing**

λ©”μ„λ“κ°€ **μμ™Έλ¥Ό λ°μƒμ‹ν‚¤λ” κ²½μ°**μ— μ‹¤ν–‰ν•λ„λ΅ ν•λ‹¤.

```java
@AfterThrowing(value = "hello.aop.order.aop.Pointcuts.orderAndService()", throwing = "ex")
public void doThrowing(JoinPoint joinPoint, Exception ex) {
    log.info("[ex] {} message={}", joinPoint.getSignature(), ex.getMessage());
}
```

- throwing μ†μ„±μ— μ‚¬μ©λ μ΄λ¦„μ€ Advice λ©”μ„λ“μ λ§¤κ°λ³€μ μ΄λ¦„κ³Ό λ™μΌν•΄μ•Όν•λ‹¤.
- throwing μ μ— μ§€μ •λ νƒ€μ…κ³Ό μΌμΉν•λ” μμ™Έλ¥Ό λ€μƒμΌλ΅ μ‹¤ν–‰ν•λ‹¤.

<br>

**π”Έ After**

Join Pointμ λ™μ‘κ³Ό μƒκ΄€μ—†μ΄ μ‹¤ν–‰ν•λ„λ΅ ν•λ‹¤.
- try-catch λ¬Έμ ```finally```μ™€ λΉ„μ·ν• λ™μ‘μ„ ν•λ‹¤.

λ©”μ„λ“ μ‹¤ν–‰ ν›„ ```@After```μ κ³µν†µ κΈ°λ¥μ„ μ‹¤ν–‰ν•λ‹¤.

- μΌλ°μ μΌλ΅ λ¦¬μ†μ¤λ¥Ό ν•΄μ ν•λ”λ° μ‚¬μ©

<br>

**π”Έ Around**

λ©”μ„λ“ νΈμ¶ μ „γƒ»ν›„μ— μν–‰ν•λ©°, κ°€μ¥ κ°•λ ¥ν• Adviceμ΄λ‹¤.

λ©”μ„λ“ μ‹¤ν–‰ μ „ & ν›„, μμ™Έ λ°μƒ μ‹μ μ— κ³µν†µ κΈ°λ¥μ„ μ‹¤ν–‰ν•λ‹¤.

Adviceμ μ²« λ²μ§Έ λ§¤κ°λ³€μλ” ```ProceedingJoinPoint```λ¥Ό μ‚¬μ©ν•λ‹¤.

```proceed()```λ¥Ό ν†µν•΄ λ€μƒμ„ μ‹¤ν–‰ν•λ©°, μ—¬λ¬λ² μ‹¤ν–‰ν•  μ μλ‹¤.

<br>

***

<br>

## PointCut ν‘ν„μ‹

> **π’΅ PointCut**
>
> Join Point μ¤‘μ—μ„ Adviceκ°€ μ μ©λ  **μ„μΉ**λ¥Ό μ„ λ³„ν•λ” κΈ°λ¥μ΄λ‹¤.
>
> AspectJ ν‘ν„μ‹μ„ μ‚¬μ©ν•΄μ„ μ§€μ •ν•λ‹¤.

<br>

### ν¬μΈνΈμ»· μ§€μ‹μ (PointCut Designator, PCD)

PointCut ν‘ν„μ‹μ€ ```execution```κ³Ό κ°™μ€ ν¬μΈνΈμ»· μ§€μ‹μλ΅ μ‹μ‘ν•λ‹¤.

```execution```μ„ κ°€μ¥ λ§μ΄ μ‚¬μ©ν•λ©°, λ‚λ¨Έμ§€λ” μμ£Ό μ‚¬μ©ν•μ§€ μ•λ”λ‹¤.

|μΆ…λ¥	|μ„¤λ…|
|:-:|:-|
|execution	|λ©”μ„λ“ μ‹¤ν–‰ μ΅°μΈ ν¬μΈνΈλ¥Ό λ§¤μΉ­ν•λ‹¤.<br>μ¤ν”„λ§ AOPμ—μ„ κ°€μ¥ λ§μ΄ μ‚¬μ©ν•λ©°, κΈ°λ¥λ„ λ³µμ΅ν•λ‹¤.|
|within|	νΉμ • νƒ€μ… λ‚΄μ μ΅°μΈ ν¬μΈνΈλ¥Ό λ§¤μΉ­ν•λ‹¤.|
|args|	μΈμκ°€ μ£Όμ–΄μ§„ νƒ€μ…μ μΈμ¤ν„΄μ¤μΈ μ΅°μΈ ν¬μΈνΈ|
|this|	μ¤ν”„λ§ λΉ κ°μ²΄(μ¤ν”„λ§ AOP ν”„λ΅μ‹)λ¥Ό λ€μƒμΌλ΅ ν•λ” μ΅°μΈ ν¬μΈνΈ|
|target|	Target κ°μ²΄(μ¤ν”„λ§ AOP ν”„λ΅μ‹κ°€ κ°€λ¥΄ν‚¤λ” μ‹¤μ  λ€μƒ)λ¥Ό λ€μƒμΌλ΅ ν•λ” μ΅°μΈ ν¬μΈνΈ|
|@target|	μ‹¤ν–‰ κ°μ²΄μ ν΄λμ¤μ— μ£Όμ–΄μ§„ νƒ€μ…μ μ–΄λ…Έν…μ΄μ…μ΄ μλ” μ΅°μΈ ν¬μΈνΈ|
|@within|	μ£Όμ–΄μ§„ μ–΄λ…Έν…μ΄μ…μ΄ μλ” νƒ€μ… λ‚΄ μ΅°μΈ ν¬μΈνΈ|
|@annotation|	λ©”μ„λ“κ°€ μ£Όμ–΄λ‹ μ–΄λ…Έν…μ΄μ…μ„ κ°€μ§€κ³  μλ” μ΅°μΈ ν¬μΈνΈλ¥Ό λ§¤μΉ­|
|@args|	μ „λ‹¬λ μ‹¤μ  μΈμμ λ°νƒ€μ„ νƒ€μ…μ΄ μ£Όμ–΄μ§„ νƒ€μ…μ μ–΄λ…Έν…μ΄μ…μ„ κ°–λ” μ΅°μΈ ν¬μΈνΈ|
|bean	|μ¤ν”„λ§ μ „μ© ν¬μΈνΈμ»· μ§€μ‹μμ΄κ³  λΉμ μ΄λ¦„μΌλ΅ ν¬μΈνΈμ»·μ„ μ§€μ •ν•λ‹¤.|

<br>

### μΌλ°μ μΈ PointCut ν‘ν„μ‹

ν¬μΈνΈμ»· ν‘ν„μ‹μ€ ```@Pointcut``` μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•μ—¬ ν‘μ‹λλ‹¤.

ν¬μΈνΈμ»· μ„ μ–Έμ€ μ΄λ¦„κ³Ό λ§¤κ°λ³€μλ¥Ό ν¬ν•¨ν•λ” μ„λ…κ³Ό  
λ©”μ†λ“ μ‹¤ν–‰μ„ μ •ν™•ν κ²°μ •ν•λ” Pointcut ν‘ν„μ‹μ λ‘ λ¶€λ¶„μΌλ΅ κµ¬μ„±λλ‹¤.

π”Έ ```execution(public * *(..))```  
&emsp; : λ¨λ“  κ³µκ° λ©”μ„λ“ μ‹¤ν–‰
  
π”Έ ```execution(* set*(..))```  
&emsp; : ```set``` λ‹¤μ μ΄λ¦„μΌλ΅ μ‹μ‘ν•λ” λ¨λ“  λ©”μ„λ“ μ‹¤ν–‰

π”Έ ```execution(* com.xyz.service.AccountService.*(..))```  
&emsp; : ```AccountService``` μΈν„°νμ΄μ¤μ— μν•΄ μ •μλ λ¨λ“  λ©”μ„λ“μ μ‹¤ν–‰

π”Έ ```execution(* com.xyz.service.*.*(..))```  
&emsp; : ```service``` ν¨ν‚¤μ§€μ— μ •μλ λ©”μ„λ“ μ‹¤ν–‰

π”Έ ```execution(* com.xyz.service..*.*(..))```  
&emsp; : ```service``` ν¨ν‚¤μ§€ λλ” ν•΄λ‹Ή ν•μ„ ν¨ν‚¤μ§€ μ¤‘ ν•λ‚μ— μ •μλ λ©”μ„λ“ μ‹¤ν–‰

π”Έ ```within(com.xyz.service.*)```  
&emsp; : ```service``` ν¨ν‚¤μ§€ λ‚΄μ λ¨λ“  μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```within(com.xyz.service..*)```  
&emsp; : ```service``` ν¨ν‚¤μ§€ λλ” ν•μ„ ν¨ν‚¤μ§€ μ¤‘ ν•λ‚ λ‚΄μ λ¨λ“  μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```this(com.xyz.service.AccountService)```  
&emsp; : ```AccountService``` ν”„λ΅μ‹κ°€ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” λ¨λ“  μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```target(com.xyz.service.AccountService)```  
&emsp; : ```AccountService``` λ€μƒ κ°μ²΄κ°€ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” λ¨λ“  μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```args(java.io.Serializable)```  
&emsp; : λ‹¨μΌ λ§¤κ°λ³€μλ¥Ό μ‚¬μ©ν•κ³  λ°νƒ€μ„μ— μ „λ‹¬λ μΈμκ°€ ```Serializable```κ³Ό κ°™μ€ λ¨λ“  μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```@target(org.springframework.transaction.annotation.Transactional)```  
&emsp; : λ€μƒ κ°μ²΄μ— ```@Transactional``` μ–΄λ…Έν…μ΄μ…μ΄ μλ” λ¨λ“  μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```@annotation(org.springframework.transaction.annotation.Transactional)```  
&emsp; : μ‹¤ν–‰ λ©”μ„λ“μ— ```@Transactional``` μ–΄λ…Έν…μ΄μ…μ΄ μλ” μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```@args(com.xyz.security.Classified)```  
&emsp; : λ‹¨μΌ λ§¤κ° λ³€μλ¥Ό μ‚¬μ©ν•κ³  μ „λ‹¬λ μΈμμ λ°νƒ€μ„ μ ν•μ΄ ```@Classified``` μ–΄λ…Έν…μ΄μ…μ„ κ°–λ” μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```bean(tradeService)```  
&emsp; : ```tradeService``` λΌλ” μ΄λ¦„μ„ κ°€μ§„ μ¤ν”„λ§ λΉμ λ¨λ“  μ΅°μΈ ν¬μΈνΈ  
<span style = "color : gray">&emsp; &nbsp; *(Spring AOPμ—μ„λ§ λ©”μ„λ“ μ‹¤ν–‰)*</span>

π”Έ ```bean(*Service)```  
&emsp; : μ™€μΌλ“ ν‘ν„μ‹ ```*Service``` λΌλ” μ΄λ¦„μ„ κ°€μ§„ μ¤ν”„λ§ λΉμ λ¨λ“  μ΅°μΈ ν¬μΈνΈ

<br>

### PointCut ν‘ν„μ‹ κ²°ν•©

```&&```, ```||```, ```!```λ¥Ό μ‚¬μ©ν•μ—¬ ν¬μΈνΈμ»· ν‘ν„μ‹μ„ κ²°ν•©ν•  μ μλ‹¤.

λν•, μ΄λ¦„μΌλ΅ PointCut ν‘ν„μ‹μ„ μ°Έμ΅°ν•  μλ„ μλ‹¤.

```java
@Pointcut("execution(public * *(..))")
private void anyPublicOperation() {}

@Pointcut("anyPublicOperation() && inTrading()")
private void tradingOperation() {}
```

<br>

### @AspectJ

@AspectJλ” μ–΄λ…Έν…μ΄μ…μ΄ μλ” μΌλ° Java ν΄λμ¤λ΅ κ΄€μ μ„ μ„ μ–Έν•λ” μ¤νƒ€μΌμ„ λ§ν•λ‹¤.

- Javaμ—μ„ @AspectJ ν™μ„±ν™” λ°©λ²•

```java
@Configuration
@EnableAspectJAutoProxy
public class AppConfig {

}
```
β–² _```@Configuration```μΌλ΅ @AspectJ ν™μ„±ν™”λ¥Ό μ„ν•΄μ„ ```@EnableAspectAutoProxy``` μ–΄λ…Έν…μ΄μ…μ„ μ¶”κ°€ν•λ‹¤._

<br>

- XMLμ—μ„ @AspectJ ν™μ„±ν™” λ°©λ²•

```xml
<aop:aspectj-autoproxy/>
```
β–² _@AspectJ ν™μ„±ν™”λ¥Ό μ„ν•΄ ```aop:aspectj-autoproxy```λ¥Ό μ‚¬μ©ν•λ‹¤._

<br>

@AspectJ μ§€μ›μ΄ ν™μ„±ν™”λλ©΄, @AspectJ κ΄€μ μ΄ μλ” ν΄λμ¤(```@Aspect```)λ΅ μ–΄ν”λ¦¬μΌ€μ΄μ… μ»¨ν…μ¤νΈμ— μ •μλ λ¨λ“  Beanμ΄ Springμ—μ„ μλ™μΌλ΅ κ°μ§€λκ³ , Spring AOPλ¥Ό κµ¬μ„±ν•λ”λ° μ‚¬μ©λλ‹¤.

```java
import org.aspectj.lang.annotation.Aspect;

@Aspect
public class NotVeryUsefulAspect {}
```
β–² _Java AspectJ_

<br>

```xml
<bean id="myAspect" class="org.xyz.NotVeryUsefulAspect">
    <!-- configure properties of the aspect here -->
</bean>
```
β–² _xml AspectJ_

<br>

***

<br>

## Join Point

> **π’΅ Join Point**
>
> AOPλ¥Ό μ μ©ν•  μ μλ” μ§€μ μ„ λ§ν•λ‹¤.  
> β†’ Advice μ μ© μ„μΉ, λ©”μ„λ“ μ‹¤ν–‰ μ„μΉ, μƒμ„±μ νΈμ¶, ν•„λ“ κ°’ μ ‘κ·Ό, static λ©”μ„λ“ μ ‘κ·Ό λ“±μ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘ μ§€μ  

<br>

AspectJλ¥Ό μ‚¬μ©ν•΄μ„ μ»΄νμΌ μ‹μ κ³Ό ν΄λμ¤ λ΅λ”© μ‹μ μ— μ μ©ν•λ” AOPλ”  
μ‹¤μ  λ°”μ΄νΈμ½”λ“λ¥Ό μ΅°μ‘ν•λ―€λ΅, ν•΄λ‹Ή κΈ°λ¥μ„ λ¨λ“  μ§€μ μ— μ „λ¶€ μ μ© κ°€λ¥ν•λ‹¤.

ν”„λ΅μ‹ λ°©μ‹μ„ μ‚¬μ©ν•λ” μ¤ν”„λ§ AOPλ”  
- **λ©”μ„λ“ μ‹¤ν–‰ μ§€μ μ—λ§ AOPλ¥Ό μ μ©**ν•  μ μμΌλ©°, λ©”μ„λ“ μ¤λ²„λΌμ΄λ”© κ°λ…μΌλ΅ λ™μ‘ν•λ‹¤.
  - μƒμ„±μ, static λ©”μ„λ“, ν•„λ“κ°’ μ ‘κ·Όμ—λ” ν”„λ΅μ‹ κ°λ…μ΄ μ μ©λ  μ μ—†λ‹¤.
- μ¤ν”„λ§ μ»¨ν…μ΄λ„κ°€ κ΄€λ¦¬ν•  μ μλ” **μ¤ν”„λ§ Beanμ—λ§ AOP**λ¥Ό μ μ© κ°€λ¥ν•λ‹¤.

JoinPoint λ©”μ„λ“λ” Advice μΆ…λ¥μ— λ”°λΌ μ‚¬μ© λ°©λ²•μ΄ λ‹¤λ¥΄μ§€λ§,  
κΈ°λ³Έμ μΌλ΅ Advice λ©”μ„λ“μ— λ§¤κ°λ³€μλ΅ μ„ μ–Έλ§ ν•λ©΄ λλ‹¤.

<br>

### JoinPoint μΈν„°νμ΄μ¤μ μ£Όμ” κΈ°λ¥

π”Έ ```JoinPoint.toString()```  
&emsp; : μ΅°μΈλλ” λ°©λ²•μ— λ€ν• μ„¤λ…μ„ μΈμ‡„  

π”Έ ```JoinPoint.getArgs()```  
&emsp; : JoinPointμ— μ „λ‹¬λ μΈμλ¥Ό λ°°μ—΄λ΅ λ°ν™

π”Έ ```JoinPoint.getThis()```  
&emsp; : AOP ν”„λ΅μ‹ κ°μ²΄λ¥Ό λ°ν™

π”Έ ```JoinPoint.getTarget()```  
&emsp; : AOPκ°€ μ μ©λ λ€μƒ κ°μ²΄λ¥Ό λ°ν™
- ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν• λΉ„μ¦λ‹μ¤ λ©”μ„λ“λ¥Ό ν¬ν•¨ν•λ” λΉ„μ¦λ‹μ¤ κ°μ²΄λ¥Ό λ°ν™

π”Έ ```JoinPoint.getSignature()```  
&emsp; : μ΅°μΈλλ” λ©”μ„λ“μ— λ€ν• μ„¤λ…μ„ λ°ν™
- ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν• λ©”μ„λ“μ μ‹κ·Έλ‹μ²(λ¦¬ν„΄νƒ€μ…, μ΄λ¦„, λ§¤κ°λ³€μ) μ •λ³΄κ°€ μ €μ¥λ ```Signature``` κ°μ²΄λ¥Ό λ°ν™

> **π’΅ Signature**  
> 
> κ°μ²΄κ°€ μ„ μ–Έν•λ” λ¨λ“  μ—°μ‚°μ„ μ—°μ‚°μ μ΄λ¦„, λ§¤κ°λ³€μλ΅ λ°›μ•„λ“¤μ΄λ” κ°μ²΄λ“¤μ„ μλ―Έν•λ‹¤.
> 
> **π’΅ Signatureκ°€ μ κ³µν•λ” λ©”μ„λ“**  
> 
> ```String getName()```  
> : ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν• λ©”μ„λ“μ μ΄λ¦„μ„ λ°ν™  
> ```String toLongString()```  
> : ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν• λ©”μ„λ“μ λ¦¬ν„΄νƒ€μ…, μ΄λ¦„, λ§¤κ°λ³€μλ¥Ό ν¨ν‚¤μ§€ κ²½λ΅κΉμ§€ ν¬ν•¨ν•΄μ„ λ°ν™  
> ```String toShortString()```  
> : ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν• λ©”μ„λ“ μ‹κ·Έλ‹μ²λ¥Ό μ¶•μ•½ν• λ¬Έμμ—΄λ΅ λ°ν™  

<br>

### ProceedingJoinPoint μΈν„°νμ΄μ¤μ μ£Όμ” κΈ°λ¥

π”Έ ```proceed()```  
&emsp; : λ‹¤μ Adviceλ‚ Targetμ„ νΈμ¶

<br><br>

***

_2022.10.18. Modified_

_2022.10.17. Update_